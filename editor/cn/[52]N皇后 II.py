# n çš‡åé—®é¢˜ç ”ç©¶çš„æ˜¯å¦‚ä½•å°† n ä¸ªçš‡åæ”¾ç½®åœ¨ nÃ—n çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚ 
# 
#  
# 
#  ä¸Šå›¾ä¸º 8 çš‡åé—®é¢˜çš„ä¸€ç§è§£æ³•ã€‚ 
# 
#  ç»™å®šä¸€ä¸ªæ•´æ•° nï¼Œè¿”å› n çš‡åä¸åŒçš„è§£å†³æ–¹æ¡ˆçš„æ•°é‡ã€‚ 
# 
#  ç¤ºä¾‹: 
# 
#  è¾“å…¥: 4
# è¾“å‡º: 2
# è§£é‡Š: 4 çš‡åé—®é¢˜å­˜åœ¨å¦‚ä¸‹ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚
# [
# Â [".Q..", Â // è§£æ³• 1
# Â  "...Q",
# Â  "Q...",
# Â  "..Q."],
# 
# Â ["..Q.", Â // è§£æ³• 2
# Â  "Q...",
# Â  "...Q",
# Â  ".Q.."]
# ]
#  
# 
#  
# 
#  æç¤ºï¼š 
# 
#  
#  çš‡åï¼Œæ˜¯å›½é™…è±¡æ£‹ä¸­çš„æ£‹å­ï¼Œæ„å‘³ç€å›½ç‹çš„å¦»å­ã€‚çš‡ååªåšä¸€ä»¶äº‹ï¼Œé‚£å°±æ˜¯â€œåƒå­â€ã€‚å½“å¥¹é‡è§å¯ä»¥åƒçš„æ£‹å­æ—¶ï¼Œå°±è¿…é€Ÿå†²ä¸Šå»åƒæ‰æ£‹å­ã€‚å½“ç„¶ï¼Œå¥¹æ¨ªã€ç«–ã€æ–œéƒ½å¯èµ°ä¸€æˆ– N
# -1 æ­¥ï¼Œå¯è¿›å¯é€€ã€‚ï¼ˆå¼•ç”¨è‡ª ç™¾åº¦ç™¾ç§‘ - çš‡å ï¼‰ 
#  
#  Related Topics å›æº¯ç®—æ³• 
#  ğŸ‘ 146 ğŸ‘ 0


# leetcode submit region begin(Prohibit modification and deletion)
class Solution:
    def totalNQueens(self, n: int) -> int:
        # ç”ŸæˆN*Nçš„æ£‹ç›˜ï¼Œå¡«å……æ£‹ç›˜ï¼Œæ¯ä¸ªæ ¼å­é»˜è®¤æ˜¯â€œã€‚â€è¡¨ç¤ºæ²¡æœ‰æ”¾ç½®çš‡å
        arr = [["." for _ in range(n)] for _ in range(n)]
        res = []

        # æ£€æŸ¥å½“å‰çš„è¡Œå’Œåˆ—æ˜¯å¦å¯ä»¥æ”¾ç½®çš‡å
        def check(x, y):
            # æ£€æŸ¥ç«–ç€çš„ä¸€åˆ—æ˜¯å¦æœ‰çš‡å
            for i in range(x):
                if arr[i][y] == "Q":
                    return False
            # æ£€æŸ¥å·¦ä¸Šåˆ°å³ä¸‹çš„æ–œè¾¹æ˜¯å¦æœ‰çš‡å
            i, j = x - 1, y - 1
            while i >= 0 and j >= 0:
                if arr[i][j] == "Q":
                    return False
                i, j = i - 1, j - 1
            # æ£€æŸ¥å·¦ä¸‹åˆ°å³ä¸Šçš„æ–œè¾¹æ˜¯å¦æœ‰çš‡å
            i, j = x - 1, y + 1
            while i >= 0 and j < n:
                if arr[i][j] == "Q":
                    return False
                i, j = i - 1, j + 1
            return True

        def dfs(x):
            # xæ˜¯ä»0å¼€å§‹è®¡ç®—çš„
            # å½“x==næ—¶æ‰€æœ‰è¡Œçš„çš‡åéƒ½æ”¾ç½®å®Œæ¯•ï¼Œæ­¤æ—¶è®°å½•ç»“æœ
            if x == n:
                res.append(["".join(arr[i]) for i in range(n)])
                return
                # éå†æ¯ä¸€åˆ—
            for y in range(n):
                # æ£€æŸ¥[x,y]è¿™ä¸€åæ ‡æ˜¯å¦å¯ä»¥æ”¾ç½®çš‡å
                # å¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œå°±æ”¾ç½®çš‡åï¼Œå¹¶ç»§ç»­æ£€æŸ¥ä¸‹ä¸€è¡Œ
                if check(x, y):
                    arr[x][y] = "Q"
                    dfs(x + 1)
                    arr[x][y] = "."

        dfs(0)
        return len(res)
# leetcode submit region end(Prohibit modification and deletion)
